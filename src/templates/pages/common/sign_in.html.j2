{% extends "base.html.j2" %}
{% block title %}Войти{% endblock %}

{% block head %}
{{ super() }}
<style>
    html,
    body,
    .body-container {
        height: 100%;
    }

    .form-signin {
        max-width: 330px;
        padding: 1rem;
    }

    .form-signin .form-floating:focus-within {
        z-index: 2;
    }

    .form-signin input[type="email"] {
        margin-bottom: -1px;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
    }

    .form-signin input[type="password"] {
        margin-bottom: 10px;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
    }

    .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
    }

    @media (min-width: 768px) {
        .bd-placeholder-img-lg {
            font-size: 3.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}

<div class="d-flex align-items-center py-4 bg-body-tertiary body-container">

    <main class="form-signin w-100 m-auto">
        <form accept-charset="UTF-8" method="post">
            <div class="text-center">
                <div class="mb-4">
                    {% include 'elements/logo.html.j2' %}
                </div>
                <h1 class="h3 mb-3 fw-normal">Авторизация</h1>
            </div>
            {% include 'elements/alert.html.j2' %}
            <div class="form-floating">
                <input type="password" class="form-control" id="floatingPassword" placeholder="Personal Access Token" name="access_token"
                    minlength="1" maxlength="255" required>
                <label for="floatingPassword">Personal Access Token</label>
            </div>
            <input type="hidden" name="redirect" value="{{ redirect or '' }}">

            {# <div class="form-check text-start my-3">
                <input class="form-check-input" type="checkbox" value="remember-me" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                    Запомнить меня
                </label>
            </div> #}
            <button class="btn btn-primary w-100 py-2" type="submit">Войти</button>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-outline-secondary w-100 py-2 mt-2" data-bs-toggle="modal" data-bs-target="#tokenGuideModal">
                Как создать Personal Access Token
            </button>


        </form>
    </main>

</div>


<!-- Modal -->
<div class="modal fade" id="tokenGuideModal" tabindex="-1" aria-labelledby="tokenGuideModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="tokenGuideModalLabel">Как создать Personal Access Token</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h4>Personal Access Token пользователя</h4>
                {# TODO добавить скрины #}
                <ol>
                    <li>На левой боковой панели выберите свой аватар.</li>
                    <li>Выберите <b>Редактировать профиль</b> (<b>Edit profile</b>).</li>
                    <li>На левой боковой панели выберите <b>Токены доступа</b> (<b>Access Tokens</b>).</li>
                    <li>Выберите <b>Добавить новый токен</b> (<b>Add new token</b>).</li>
                    <li>Введите имя и дату истечения срока действия токена.</li>
                    <ul>
                        <li>Срок действия токена истекает в этот день в полночь по всемирному координированному времени.</li>
                        <li>Если вы не введете дату истечения срока действия, дата истечения срока действия автоматически устанавливается на 365 дней позже текущей даты.</li>
                        <li>По умолчанию эта дата может быть максимум на 365 дней позже текущей даты.</li>
                    </ul>
                    <li>Выберите нужные <a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html#personal-access-token-scopes" target="_blank">области действия</a>.</li>
                    <li>Выберите <b>Создать токен личного доступа</b> (<b>Create personal access token</b>).</li>
                </ol>
                <p>Сохраните токен личного доступа в безопасном месте. После того, как вы покинете страницу, у вас больше не будет доступа к токену.</p>
                <h4>Personal Access Token бота</h4>
                {# TODO добавить инструкции для ботовв групп и репозиториев #}
                <p>...</p>
            </div>
        </div>
    </div>
</div>


{% endblock %}
